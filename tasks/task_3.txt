Задание 3
Транспортный справочник. Часть C
Внесите изменения во вторую версию кода.
В базе появляются данные о реальном — измеренном по дорогам — расстоянии между остановками.
Stop X (изменения запроса на добавление остановки)
Новый формат запроса на добавление остановки: Stop X: latitude, longitude, D1m to stop1, D2m to stop2, ...
Теперь после широты и долготы может содержаться список расстояний от этой остановки до соседних. По умолчанию предполагается, что расстояние от X до stop# равно расстоянию от stop# до X, если только расстояние от stop# до X не задано явным образом при добавлении остановки stop#.
Гарантируется, что каждая из остановок stop# определена в некотором запросе Stop.
В рамках одного запроса Stop все stop# различны, их количество не превосходит 100.
Все Di — целые положительные числа, каждое из которых не превышает 1000000 и не меньше расстояния по прямой между соответствующими остановками. После каждого расстояния обязательно следует буква m.
Bus X (изменения запроса на информацию об автобусе)
Новый формат ответа на запрос информации об автобусе: Bus X: R stops on route, U unique stops, L route length, C curvature.
L теперь вычисляется с использованием дорожного расстояния, а не географических координат.
С — извилистость, то есть отношение фактической длины маршрута к географическому расстоянию. Фактическая длина маршрута — это L. Географическое расстояние — это длина маршрута, которая вычислялась в предыдущих заданиях. Таким образом, C — вещественное число, большее единицы. Оно может быть равно единице только в том случае, если автобус едет между остановками по кратчайшему пути (и тогда больше похож на вертолёт). С может оказаться меньше единицы только благодаря телепортации или хордовым тоннелям.
Гарантируется, что для любых двух соседних остановок любого маршрута задано расстояние по дорогам. Расстояние для пары остановок может задаваться только один раз. В этом случае считается, что оно не зависит от направления движения. Возможно задание разного расстояния между двумя остановками в разных направлениях. Также возможно задание расстояния от остановки до самой себя — так бывает, если автобус разворачивается и приезжает на ту же остановку. Длина маршрута никогда не превосходит 10 000 000 метров.
Добавьте в класс TransportCatalogue методы для выполнения следующих задач:
задание дистанции между остановками,
получение дистанции между остановками.
Пример
Ввод
13
Stop Tolstopaltsevo: 55.611087, 37.20829, 3900m to Marushkino
Stop Marushkino: 55.595884, 37.209755, 9900m to Rasskazovka, 100m to Marushkino
Bus 256: Biryulyovo Zapadnoye > Biryusinka > Universam > Biryulyovo Tovarnaya > Biryulyovo Passazhirskaya > Biryulyovo Zapadnoye
Bus 750: Tolstopaltsevo - Marushkino - Marushkino - Rasskazovka
Stop Rasskazovka: 55.632761, 37.333324, 9500m to Marushkino
Stop Biryulyovo Zapadnoye: 55.574371, 37.6517, 7500m to Rossoshanskaya ulitsa, 1800m to Biryusinka, 2400m to Universam
Stop Biryusinka: 55.581065, 37.64839, 750m to Universam
Stop Universam: 55.587655, 37.645687, 5600m to Rossoshanskaya ulitsa, 900m to Biryulyovo Tovarnaya
Stop Biryulyovo Tovarnaya: 55.592028, 37.653656, 1300m to Biryulyovo Passazhirskaya
Stop Biryulyovo Passazhirskaya: 55.580999, 37.659164, 1200m to Biryulyovo Zapadnoye
Bus 828: Biryulyovo Zapadnoye > Universam > Rossoshanskaya ulitsa > Biryulyovo Zapadnoye
Stop Rossoshanskaya ulitsa: 55.595579, 37.605757
Stop Prazhskaya: 55.611678, 37.603831
6
Bus 256
Bus 750
Bus 751
Stop Samara
Stop Prazhskaya
Stop Biryulyovo Zapadnoye 
Вывод
Bus 256: 6 stops on route, 5 unique stops, 5950 route length, 1.36124 curvature
Bus 750: 7 stops on route, 3 unique stops, 27400 route length, 1.30853 curvature
Bus 751: not found
Stop Samara: not found
Stop Prazhskaya: no buses
Stop Biryulyovo Zapadnoye: buses 256 828

Подсказка

Добавьте новый индекс в класс транспортного справочника на основе unordered_map. Он будет хранить расстояние между остановками. В качестве ключа возьмите пару указателей на остановки. Реализуйте свой хешер для объединения элементов пары. Указатели произвольного типа можно хешировать, используя std::hash<const void*>.
Для двух остановок расстояние может быть задано только один раз, тогда оно считается одинаковым в двух направлениях. Если вы не нашли расстояние от остановки x до остановки y, то поищите расстояние от y до x.
Теперь спецификация остановки будет описывать расстояния до остановок, которые будут определены позже. Для решения проблемы можете обрабатывать ввод в два прохода — на первом добавить остановку с координатами, на последующем — расстояния до соседних остановок.